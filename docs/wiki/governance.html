<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Governance &mdash; Inferno ($IFR) Documentation</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    /* ============================================================
       Inferno Wiki — Shared Styles (copy into every wiki page)
       ============================================================ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:       #0a0a0a;
      --card:     #111113;
      --border:   #222225;
      --text:     #e8e8ed;
      --muted:    #8a8a96;
      --accent:   #ff4500;
      --green:    #22c55e;
      --sidebar-w: 240px;
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }

    /* ---------- Layout (CSS Grid) ---------- */
    .layout {
      display: grid;
      grid-template-columns: var(--sidebar-w) 1fr;
      min-height: 100vh;
    }

    /* ---------- Sidebar ---------- */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: var(--sidebar-w);
      height: 100vh;
      background: var(--card);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      padding: 24px 0;
      overflow-y: auto;
      z-index: 100;
      transition: transform 0.3s ease;
    }

    .sidebar-logo {
      font-size: 20px;
      font-weight: 800;
      letter-spacing: 3px;
      color: var(--accent);
      padding: 0 24px 4px;
      text-decoration: none;
      display: block;
    }

    .sidebar-subtitle {
      font-size: 12px;
      color: var(--muted);
      padding: 0 24px 24px;
      border-bottom: 1px solid var(--border);
    }

    .sidebar-nav {
      list-style: none;
      padding: 16px 0;
      flex: 1;
    }

    .sidebar-nav li {}

    .sidebar-nav a {
      display: block;
      padding: 10px 24px;
      color: var(--muted);
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      transition: color 0.2s, background 0.2s, border-left 0.2s;
      border-left: 3px solid transparent;
    }

    .sidebar-nav a:hover {
      color: var(--text);
      background: rgba(255, 255, 255, 0.03);
    }

    .sidebar-nav a.active {
      color: var(--accent);
      border-left-color: var(--accent);
      background: rgba(255, 69, 0, 0.06);
    }

    .sidebar-nav .nav-divider {
      height: 1px;
      background: var(--border);
      margin: 12px 24px;
    }

    .sidebar-nav .nav-back a {
      font-size: 13px;
      color: var(--muted);
      opacity: 0.7;
    }

    .sidebar-nav .nav-back a:hover {
      opacity: 1;
      color: var(--text);
    }

    /* ---------- Hamburger (mobile) ---------- */
    .hamburger {
      display: none;
      position: fixed;
      top: 16px;
      left: 16px;
      z-index: 200;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px 12px;
      cursor: pointer;
      flex-direction: column;
      gap: 5px;
    }

    .hamburger span {
      display: block;
      width: 22px;
      height: 2px;
      background: var(--text);
      border-radius: 2px;
      transition: transform 0.3s, opacity 0.3s;
    }

    .hamburger.open span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
    .hamburger.open span:nth-child(2) { opacity: 0; }
    .hamburger.open span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }

    .sidebar-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      z-index: 90;
    }

    /* ---------- Main content ---------- */
    .main {
      grid-column: 2;
      padding: 48px 56px;
      max-width: 960px;
    }

    .main h1 {
      font-size: 32px;
      font-weight: 800;
      margin-bottom: 8px;
      color: var(--text);
    }

    .main h1 .accent {
      color: var(--accent);
    }

    .main h2 {
      font-size: 22px;
      font-weight: 700;
      margin: 40px 0 16px;
      color: var(--text);
    }

    .main h3 {
      font-size: 18px;
      font-weight: 600;
      margin: 32px 0 12px;
      color: var(--text);
    }

    .main p {
      color: var(--muted);
      margin-bottom: 16px;
      font-size: 15px;
      max-width: 680px;
    }

    .main a {
      color: var(--accent);
      text-decoration: none;
    }

    .main a:hover {
      text-decoration: underline;
    }

    .subtitle {
      font-size: 16px;
      color: var(--muted);
      margin-bottom: 32px;
    }

    /* ---------- Code blocks ---------- */
    pre {
      background: #1a1a1d;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px 20px;
      overflow-x: auto;
      font-size: 13px;
      line-height: 1.7;
      margin: 16px 0;
      color: var(--text);
    }

    code {
      font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
      font-size: 13px;
      color: var(--text);
    }

    p code, li code, td code {
      background: rgba(255, 255, 255, 0.06);
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 13px;
    }

    /* ---------- Tables ---------- */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      font-size: 14px;
    }

    th, td {
      text-align: left;
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
    }

    th {
      color: var(--muted);
      font-weight: 600;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    td { color: var(--text); }

    tr:hover td { background: rgba(255, 255, 255, 0.02); }

    /* ---------- Lists ---------- */
    .main ul, .main ol {
      padding-left: 24px;
      margin-bottom: 16px;
    }

    .main li {
      color: var(--muted);
      font-size: 14px;
      margin-bottom: 6px;
    }

    /* ---------- Callout ---------- */
    .callout {
      background: rgba(255, 69, 0, 0.06);
      border-left: 3px solid var(--accent);
      border-radius: 0 8px 8px 0;
      padding: 16px 20px;
      margin: 20px 0;
    }

    .callout p {
      color: var(--text);
      margin: 0;
      font-size: 14px;
    }

    .callout-green {
      background: rgba(34, 197, 94, 0.06);
      border-left-color: var(--green);
    }

    /* ---------- Flow Diagram ---------- */
    .flow-diagram {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 8px;
      margin: 24px 0 32px;
      padding: 24px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow-x: auto;
    }

    .flow-box {
      background: #1a1a1d;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px 18px;
      font-size: 13px;
      font-weight: 500;
      color: var(--text);
      text-align: center;
      white-space: nowrap;
    }

    .flow-box.state-pending {
      border-color: #f59e0b;
      color: #f59e0b;
    }

    .flow-box.state-executable {
      border-color: var(--accent);
      color: var(--accent);
    }

    .flow-box.state-executed {
      border-color: var(--green);
      color: var(--green);
    }

    .flow-box.state-cancelled {
      border-color: #ef4444;
      color: #ef4444;
    }

    .flow-box.action {
      background: rgba(255, 69, 0, 0.08);
      border-color: var(--accent);
      color: var(--text);
    }

    .flow-arrow {
      color: var(--muted);
      font-size: 18px;
      font-weight: 700;
      user-select: none;
    }

    .flow-branch {
      width: 100%;
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
      padding-top: 12px;
      border-top: 1px dashed var(--border);
    }

    .flow-label {
      font-size: 12px;
      color: var(--muted);
      font-style: italic;
      white-space: nowrap;
    }

    /* ---------- State Legend ---------- */
    .state-legend {
      display: flex;
      gap: 24px;
      flex-wrap: wrap;
      margin: 12px 0 24px;
    }

    .state-legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: var(--muted);
    }

    .state-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      display: inline-block;
    }

    .state-dot.pending { background: #f59e0b; }
    .state-dot.executable { background: var(--accent); }
    .state-dot.executed { background: var(--green); }
    .state-dot.cancelled { background: #ef4444; }

    /* ---------- Address ---------- */
    .address {
      font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
      font-size: 12px;
      color: var(--muted);
      word-break: break-all;
    }

    /* ---------- Footer ---------- */
    .wiki-footer {
      margin-top: 64px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
      font-size: 13px;
      color: var(--muted);
    }

    /* ---------- Responsive ---------- */
    @media (max-width: 768px) {
      .layout {
        grid-template-columns: 1fr;
      }

      .sidebar {
        transform: translateX(-100%);
      }

      .sidebar.open {
        transform: translateX(0);
      }

      .sidebar-overlay.open {
        display: block;
      }

      .hamburger {
        display: flex;
      }

      .main {
        grid-column: 1;
        padding: 72px 20px 40px;
      }

      .flow-diagram {
        flex-direction: column;
        align-items: stretch;
      }

      .flow-arrow {
        text-align: center;
        transform: rotate(90deg);
      }

      .flow-branch {
        flex-direction: column;
      }

      table {
        font-size: 13px;
      }

      th, td {
        padding: 10px 12px;
      }
    }

    @media (max-width: 480px) {
      .main h1 {
        font-size: 26px;
      }

      .state-legend {
        flex-direction: column;
        gap: 8px;
      }
    }
    /* ============================================================
       End Shared Styles
       ============================================================ */
  </style>
  <link rel="icon" type="image/png" href="../assets/token.png">
</head>
<body>

  <!-- Hamburger button (mobile only) -->
  <button class="hamburger" id="hamburger" aria-label="Toggle navigation">
    <span></span>
    <span></span>
    <span></span>
  </button>

  <!-- Overlay (mobile only) -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <div class="layout">

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <a href="index.html" class="sidebar-logo">INFERNO</a>
      <div class="sidebar-subtitle">Documentation</div>
      <ul class="sidebar-nav">
        <li><a href="index.html">Home</a></li>
        <li><a href="contracts.html">Smart Contracts</a></li>
        <li><a href="tokenomics.html">Tokenomics</a></li>
        <li><a href="lock-mechanism.html">Lock Mechanism</a></li>
        <li><a href="governance.html" class="active">Governance</a></li>
        <li><a href="security.html">Security</a></li>
        <li><a href="deployment.html">Deployment</a></li>
        <li><a href="integration.html">Integration Guide</a></li>
        <li><a href="agent.html">AI Copilot</a></li>
        <li><a href="faq.html">FAQ</a></li>
        <li><div class="nav-divider"></div></li>
        <li class="nav-back"><a href="../index.html">&larr; Back to Website</a></li>
      </ul>
    </aside>

    <!-- Main content -->
    <main class="main">

      <h1><span class="accent">Governance</span></h1>
      <p class="subtitle">
        Timelock-based on-chain governance for the Inferno token &mdash; proposals, roles, parameter changes, and emergency controls.
      </p>

      <!-- ========== 1. Overview ========== -->
      <h2>1. Overview</h2>
      <p>
        The Governance contract is a <strong>timelock governor</strong> that controls the InfernoToken contract. After <code>transferOwnership()</code> was called, ALL token parameter changes must go through Governance &mdash; there is no backdoor.
      </p>
      <ul>
        <li>Mandatory delay between proposal creation and execution (default: <strong>48 hours</strong>)</li>
        <li>Guardian role can emergency-cancel proposals at any time before execution</li>
        <li>Self-governing: even the timelock delay itself can only be changed through a proposal</li>
        <li>Fully transparent &mdash; every proposal and execution is an on-chain event</li>
      </ul>

      <div class="callout">
        <p>
          <strong>Contract:</strong>
          <code class="address">0x6050b22E4EAF3f414d1155fBaF30B868E0107017</code>
          &mdash; <a href="https://sepolia.etherscan.io/address/0x6050b22E4EAF3f414d1155fBaF30B868E0107017" target="_blank" rel="noopener">View on Etherscan (Sepolia)</a>
        </p>
      </div>

      <!-- ========== 2. Timelock Mechanics ========== -->
      <h2>2. Timelock Mechanics</h2>
      <p>
        Every proposal is subject to a mandatory delay before it can be executed. This gives the community time to review and, if necessary, raise concerns.
      </p>

      <table>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Value</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>MIN_DELAY</code></td>
            <td>1 hour (3,600s)</td>
            <td>Absolute minimum &mdash; hardcoded, cannot be lowered</td>
          </tr>
          <tr>
            <td><code>MAX_DELAY</code></td>
            <td>30 days (2,592,000s)</td>
            <td>Absolute maximum &mdash; hardcoded</td>
          </tr>
          <tr>
            <td><code>delay</code> (current)</td>
            <td><strong>48 hours (172,800s)</strong></td>
            <td>Default value, changeable via self-governance</td>
          </tr>
        </tbody>
      </table>

      <p>
        When a proposal is created, its <strong>ETA</strong> (Earliest Time of Arrival) is set to
        <code>block.timestamp + delay</code>. The proposal cannot be executed before this timestamp.
      </p>

      <div class="callout">
        <p>
          <strong>Important:</strong> Changing the delay itself must go through the timelock. This prevents an attacker from reducing the delay to zero and immediately executing a malicious proposal. See <a href="#self-governance">Section 9: Self-Governance</a> for details.
        </p>
      </div>

      <!-- ========== 3. Proposal Lifecycle ========== -->
      <h2>3. Proposal Lifecycle</h2>
      <p>
        Every governance action follows the same lifecycle. Below is the visual flow:
      </p>

      <div class="flow-diagram">
        <div class="flow-box action"><code>propose(target, data)</code></div>
        <div class="flow-arrow">&rarr;</div>
        <div class="flow-box state-pending">Pending<br><small>eta = now + 48h</small></div>
        <div class="flow-arrow">&rarr;</div>
        <div class="flow-label">wait for ETA...</div>
        <div class="flow-arrow">&rarr;</div>
        <div class="flow-box state-executable">Executable</div>
        <div class="flow-arrow">&rarr;</div>
        <div class="flow-box action"><code>execute(proposalId)</code></div>
        <div class="flow-arrow">&rarr;</div>
        <div class="flow-box state-executed">Executed</div>

        <div class="flow-branch">
          <div class="flow-label">Alternative path (any time before execution):</div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-box action"><code>cancel(proposalId)</code></div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-box state-cancelled">Cancelled</div>
        </div>
      </div>

      <div class="state-legend">
        <div class="state-legend-item">
          <span class="state-dot pending"></span> Pending
        </div>
        <div class="state-legend-item">
          <span class="state-dot executable"></span> Executable
        </div>
        <div class="state-legend-item">
          <span class="state-dot executed"></span> Executed
        </div>
        <div class="state-legend-item">
          <span class="state-dot cancelled"></span> Cancelled
        </div>
      </div>

      <h3>States Explained</h3>
      <ul>
        <li><strong>Pending</strong> &mdash; Proposal has been created but ETA has not been reached. Cannot be executed yet.</li>
        <li><strong>Executable</strong> &mdash; ETA has passed. The owner can call <code>execute()</code> to carry out the proposal.</li>
        <li><strong>Executed</strong> &mdash; The target function has been called successfully. This is a terminal state.</li>
        <li><strong>Cancelled</strong> &mdash; The proposal was cancelled by the owner or guardian before execution. Terminal state.</li>
      </ul>

      <!-- ========== 4. Roles ========== -->
      <h2>4. Roles</h2>
      <p>
        The Governance contract defines three distinct roles with clearly separated permissions:
      </p>

      <table>
        <thead>
          <tr>
            <th>Role</th>
            <th>Permissions</th>
            <th>Current Holder</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Owner</strong></td>
            <td>
              <code>propose</code>, <code>execute</code>, <code>cancel</code>,
              <code>setGuardian</code>, <code>setOwner</code>
            </td>
            <td>
              Deployer<br>
              <span class="address">0x5Ecc668eab04C5bee81b5c7242e1077c946dE406</span>
            </td>
          </tr>
          <tr>
            <td><strong>Guardian</strong></td>
            <td>
              <code>cancel</code> only (emergency)<br>
              Cannot propose or execute
            </td>
            <td>
              Deployer<br>
              <span class="address">0x5Ecc668eab04C5bee81b5c7242e1077c946dE406</span>
            </td>
          </tr>
          <tr>
            <td><strong>Self</strong> <em>(Governance contract)</em></td>
            <td>
              <code>setDelay</code> (only via its own timelock)
            </td>
            <td>
              Governance<br>
              <span class="address">0x6050b22E4EAF3f414d1155fBaF30B868E0107017</span>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="callout callout-green">
        <p>
          <strong>Note:</strong> On mainnet, the Owner and Guardian roles will be transferred to a Gnosis Safe multisig for additional security.
        </p>
      </div>

      <!-- ========== 5. What Parameters Can Be Changed ========== -->
      <h2>5. What Parameters Can Be Changed</h2>
      <p>
        The following functions on InfernoToken (and Governance itself) can only be called through the governance timelock:
      </p>

      <table>
        <thead>
          <tr>
            <th>Function</th>
            <th>Description</th>
            <th>Constraints</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>InfernoToken.setFeeRates(senderBurnBps, recipientBurnBps, poolFeeBps)</code></td>
            <td>Change the fee rates for transfers</td>
            <td>Total must not exceed 5% (500 bps)</td>
          </tr>
          <tr>
            <td><code>InfernoToken.setFeeExempt(address, bool)</code></td>
            <td>Add or remove fee exemptions for specific addresses</td>
            <td>&mdash;</td>
          </tr>
          <tr>
            <td><code>InfernoToken.setPoolFeeReceiver(address)</code></td>
            <td>Change the address that receives pool fees</td>
            <td>Cannot be zero address</td>
          </tr>
          <tr>
            <td><code>Governance.setDelay(uint256)</code></td>
            <td>Change the timelock delay</td>
            <td>Self-governance only; MIN_DELAY &le; value &le; MAX_DELAY</td>
          </tr>
        </tbody>
      </table>

      <!-- ========== 6. Creating a Proposal ========== -->
      <h2>6. Creating a Proposal</h2>
      <p>
        Use ethers.js (v5) to create a governance proposal. The <code>propose()</code> function takes the target contract address and the encoded calldata:
      </p>

<pre><code><span style="color: var(--muted)">// Example: Change fee rates to 1.5% sender burn + 0.5% recipient burn + 1% pool fee</span>
const governance = new ethers.Contract(GOV_ADDRESS, GOV_ABI, signer);

<span style="color: var(--muted)">// Encode the function call</span>
const iface = new ethers.utils.Interface([
  "function setFeeRates(uint256,uint256,uint256)"
]);
const calldata = iface.encodeFunctionData("setFeeRates", [150, 50, 100]);

<span style="color: var(--muted)">// Submit the proposal</span>
const tx = await governance.propose(TOKEN_ADDRESS, calldata);
const receipt = await tx.wait();

<span style="color: var(--muted)">// Get the proposal ID from the event</span>
const event = receipt.events.find(e => e.event === "ProposalCreated");
console.log("Proposal ID:", event.args.proposalId.toString());
console.log("ETA:", new Date(event.args.eta.toNumber() * 1000));</code></pre>

      <div class="callout">
        <p>
          <strong>Tip:</strong> The proposal ID is emitted in the <code>ProposalCreated</code> event. Store it &mdash; you will need it to execute or cancel the proposal later.
        </p>
      </div>

      <!-- ========== 7. Executing a Proposal ========== -->
      <h2>7. Executing a Proposal</h2>
      <p>
        After the 48-hour delay has passed, the owner can execute the proposal:
      </p>

<pre><code><span style="color: var(--muted)">// After 48h delay has passed</span>
const tx = await governance.execute(proposalId);
const receipt = await tx.wait();

console.log("Proposal executed in block:", receipt.blockNumber);
<span style="color: var(--muted)">// The target function (e.g., setFeeRates) has now been called</span></code></pre>

      <p>
        If you try to execute before the ETA, the transaction will revert with <code>"Governance: too early"</code>.
      </p>

      <!-- ========== 8. Guardian Emergency Cancel ========== -->
      <h2>8. Guardian Emergency Cancel</h2>
      <p>
        The Guardian role exists as a safety mechanism. A guardian can cancel <strong>any</strong> pending proposal instantly, without waiting for the timelock delay.
      </p>

      <ul>
        <li>Designed for emergency response (e.g., a malicious proposal is detected)</li>
        <li>The guardian cannot propose or execute &mdash; only cancel</li>
        <li>Cannot undo an already-executed proposal (execution is permanent on-chain)</li>
        <li>The owner can also cancel proposals (they have a superset of permissions)</li>
      </ul>

<pre><code><span style="color: var(--muted)">// Guardian cancels a suspicious proposal</span>
const guardianGovernance = governance.connect(guardianSigner);
const tx = await guardianGovernance.cancel(proposalId);
await tx.wait();

console.log("Proposal", proposalId, "cancelled by guardian");</code></pre>

      <!-- ========== 9. Self-Governance ========== -->
      <h2 id="self-governance">9. Self-Governance</h2>
      <p>
        The <code>setDelay()</code> function has the <code>onlySelf</code> modifier, meaning it can <strong>only be called by the Governance contract itself</strong>. No external account &mdash; not even the owner &mdash; can call it directly.
      </p>

      <h3>How to Change the Delay</h3>
      <ol>
        <li>Propose a call where the <strong>target</strong> is the Governance contract itself and the <strong>calldata</strong> encodes <code>setDelay(newDelay)</code></li>
        <li>Wait for the <strong>current</strong> delay to elapse (48h by default)</li>
        <li>Execute the proposal &mdash; the Governance contract calls itself</li>
      </ol>

<pre><code><span style="color: var(--muted)">// Example: Change delay from 48h to 72h (259200 seconds)</span>
const iface = new ethers.utils.Interface(["function setDelay(uint256)"]);
const calldata = iface.encodeFunctionData("setDelay", [259200]);

<span style="color: var(--muted)">// Target is the Governance contract itself</span>
const tx = await governance.propose(GOV_ADDRESS, calldata);
await tx.wait();

<span style="color: var(--muted)">// ... wait 48 hours ...</span>

await governance.execute(proposalId);</code></pre>

      <div class="callout">
        <p>
          <strong>Security:</strong> This design prevents "instant delay reduction" attacks. An attacker who gains owner access cannot reduce the delay to zero and then immediately execute a malicious proposal &mdash; they must still wait for the current delay to pass, giving the guardian time to cancel.
        </p>
      </div>

      <!-- ========== 10. Historical Proposals (Sepolia) ========== -->
      <h2>10. Historical Proposals (Sepolia)</h2>
      <p>
        Below are the governance proposals that have been submitted on the Sepolia testnet deployment:
      </p>

      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Action</th>
            <th>Status</th>
            <th>Details</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>#0</strong></td>
            <td><code>setFeeExempt(0xA4A1ea...6A36f90, true)</code></td>
            <td><span style="color: var(--green); font-weight: 600;">Executed</span></td>
            <td>
              Executed 2026-02-20<br>
              Target: InfernoToken &mdash; Fee exemption for DEX Router<br>
              Proposed by: Deployer (<code>0x5Ecc...dE406</code>)<br>
              <span class="address">TX: 0x13ff46d8...</span>
            </td>
          </tr>
          <tr>
            <td><strong>#1</strong></td>
            <td><code>setFeeExempt(0x0Cab0A...36675d3, true)</code></td>
            <td><span style="color: var(--green); font-weight: 600;">Executed</span></td>
            <td>
              Executed 2026-02-22<br>
              Target: InfernoToken &mdash; Fee exemption for IFRLock (required for unlock())<br>
              Proposed by: Deployer (<code>0x5Ecc...dE406</code>)<br>
              <span class="address">TX: 0x211b7949...4253a909</span>
            </td>
          </tr>
          <tr>
            <td><strong>#2</strong></td>
            <td><code>setFeeExempt(0x6EF04c...7AF090, true)</code></td>
            <td><span style="color: #ef4444; font-weight: 600;">Cancelled</span></td>
            <td>
              Cancelled via Guardian<br>
              Target: InfernoToken &mdash; Fee exemption for PartnerVault v1 (deprecated)<br>
              Reason: PartnerVault v1 replaced by v2 with upgraded features<br>
              <span class="address">TX: 0xaa829332...</span>
            </td>
          </tr>
          <tr>
            <td><strong>#3</strong></td>
            <td><code>setFeeExempt(0x5F12...490A39, true)</code></td>
            <td><span style="color: #f59e0b; font-weight: 600;">Pending</span></td>
            <td>
              ETA: 2026-02-26 08:41 CET<br>
              Target: InfernoToken &mdash; Fee exemption for PartnerVault v2<br>
              After execution: 1.4M IFR top-up to PartnerVault v2<br>
              <span class="address">New PartnerVault (v2) &mdash; <code>0x5F12C0bC...490A39</code></span>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="info-box note" style="margin-top:16px;">
        <strong>Why was Proposal #2 cancelled?</strong>
        PartnerVault v1 was replaced by v2 (added authorizedCaller whitelist, anti-double-count mapping,
        and algorithmic emission throttle). Proposal #2 targeted the old v1 address and was cancelled
        via Guardian. Proposal #3 was created for the new PartnerVault v2 address (<code>0x5F12...490A39</code>).
      </div>

      <h3 style="margin-top:24px;">Governance Learnings (Sepolia)</h3>
      <ul>
        <li><strong>Contract upgrades invalidate pending proposals.</strong> When PartnerVault v1 was replaced by v2, Proposal #2 became obsolete. Always cancel outdated proposals before creating new ones for the replacement address.</li>
        <li><strong>Guardian cancel is faster than waiting.</strong> Instead of waiting 48h for an outdated proposal to expire, the Guardian can cancel immediately. This prevents accidental execution of proposals targeting deprecated contracts.</li>
        <li><strong>feeExempt must be set before funding.</strong> Transferring 40M IFR to PartnerVault v1 <em>before</em> setting feeExempt resulted in a 1.4M IFR fee deduction. On mainnet: always set feeExempt first, fund second.</li>
        <li><strong>Include version info in proposal descriptions.</strong> On-chain proposals have no description field &mdash; document the target contract version off-chain (GitHub Issue, wiki, CHANGELOG) to avoid confusion between v1/v2 addresses.</li>
        <li><strong>48h delay is sufficient for testnet operations.</strong> The delay provides enough time for review while not blocking rapid iteration. For mainnet, consider increasing to 72h for critical parameter changes.</li>
      </ul>

      <!-- ========== 11. Current Governance Model ========== -->
      <h2>11. Current Governance Model</h2>
      <p>
        Inferno currently operates under an <strong>Admin + Timelock</strong> governance model. This is a deliberate choice for the early phase of the protocol.
      </p>

      <table>
        <thead>
          <tr>
            <th>Property</th>
            <th>Current State</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Model</td>
            <td><strong>Single Admin + 48h Timelock</strong></td>
          </tr>
          <tr>
            <td>Token Voting</td>
            <td>No &mdash; not implemented yet</td>
          </tr>
          <tr>
            <td>DAO</td>
            <td>No &mdash; planned for future phase</td>
          </tr>
          <tr>
            <td>Who can propose</td>
            <td>Owner (deployer EOA) only</td>
          </tr>
          <tr>
            <td>Safety mechanism</td>
            <td>Guardian can cancel any pending proposal</td>
          </tr>
          <tr>
            <td>Transparency</td>
            <td>All proposals and executions are on-chain events with 48h public review window</td>
          </tr>
        </tbody>
      </table>

      <div class="callout">
        <p>
          <strong>Important:</strong> Inferno is <strong>not a DAO</strong> today. The current governance is admin-controlled with a mandatory timelock. This is intentional &mdash; see below for the rationale and roadmap.
        </p>
      </div>

      <!-- ========== 12. Future: Governance Roadmap ========== -->
      <h2>12. Future: Governance Roadmap</h2>
      <p>
        Governance will evolve in clearly defined phases, each building on the trust and battle-testing of the previous one:
      </p>

      <div class="flow-diagram">
        <div class="flow-box state-executed">Current<br><small>Admin + Timelock</small></div>
        <div class="flow-arrow">&rarr;</div>
        <div class="flow-box state-pending">Next<br><small>Multisig Governance</small></div>
        <div class="flow-arrow">&rarr;</div>
        <div class="flow-box">Future<br><small>Full DAO</small></div>
      </div>

      <ol>
        <li>
          <strong>Current: Admin + Timelock</strong> &mdash;
          Single owner with 48h mandatory delay. Guardian safety net. Fast iteration, security-first approach.
        </li>
        <li>
          <strong>Next: Multisig Governance</strong> &mdash;
          Gnosis Safe multisig replaces single owner. Multiple signers required for proposals. Same timelock protection.
        </li>
        <li>
          <strong>Future: Full DAO</strong> &mdash;
          Lock-weighted voting (IFRLock balances as voting power). Community proposals. On-chain quorum requirements. Partner tokens grant additional voting rights.
        </li>
      </ol>

      <h3>Why Not DAO from Day One?</h3>
      <ul>
        <li><strong>Security over speed:</strong> Early-stage protocols need fast response to vulnerabilities</li>
        <li><strong>Whale manipulation:</strong> Token voting without safeguards enables hostile governance takeovers</li>
        <li><strong>Flash-loan attacks:</strong> Without lock-weighted voting, attackers can borrow tokens to swing votes</li>
        <li><strong>Community maturity:</strong> DAO governance requires an engaged, informed token holder base</li>
        <li><strong>Iterative decentralization:</strong> Gradual transition builds trust and battle-tests each layer</li>
      </ul>

      <h3>Capability Comparison</h3>
      <p>
        Each governance model unlocks different capabilities:
      </p>

      <table>
        <thead>
          <tr>
            <th>Capability</th>
            <th>Admin+Timelock (now)</th>
            <th>Multisig (next)</th>
            <th>Full DAO (future)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Fee Rate Changes</td>
            <td>Owner only</td>
            <td>3/5 signers</td>
            <td>Community vote</td>
          </tr>
          <tr>
            <td>Guardian Updates</td>
            <td>Owner only</td>
            <td>3/5 signers</td>
            <td>Community vote</td>
          </tr>
          <tr>
            <td>Emergency Cancel</td>
            <td>Guardian</td>
            <td>Any signer</td>
            <td>Guardian + vote</td>
          </tr>
          <tr>
            <td>Delay Changes</td>
            <td>Self-governance</td>
            <td>Self-governance</td>
            <td>Community vote</td>
          </tr>
          <tr>
            <td>Partner Onboarding</td>
            <td>Team decision</td>
            <td>Multisig vote</td>
            <td>Community proposal</td>
          </tr>
          <tr>
            <td>Token Voting</td>
            <td>Not available</td>
            <td>Not available</td>
            <td>Lock-weighted</td>
          </tr>
        </tbody>
      </table>

      <h3>Partner Voting Rights (DAO Phase)</h3>
      <p>
        In the DAO phase, voting power will be derived from <strong>locked IFR balances</strong> (via IFRLock), not freely tradable tokens. This prevents flash-loan governance attacks. Partner tokens earned through the PartnerVault also grant voting rights, ensuring that governance influence reflects real ecosystem contribution.
      </p>

      <div class="callout">
        <p>
          <strong>Security &gt; Speed:</strong> Every governance transition is irreversible. We will only move to the next phase when the current model has been battle-tested and the community is ready. There is no timeline pressure.
        </p>
      </div>

      <!-- ========== 13. PartnerVault Governance Features ========== -->
      <h2>13. PartnerVault Governance Features</h2>
      <p>
        The PartnerVault contract introduces additional governance-controlled mechanisms beyond basic parameter changes.
      </p>

      <h3>AuthorizedCaller Whitelist</h3>
      <p>
        By default, only the admin (Governance Timelock) can call <code>recordLockReward()</code>.
        To enable automated reward recording, governance can whitelist backend wallets via
        <code>setAuthorizedCaller(address, true)</code>. These callers can record lock rewards
        but cannot change any other parameters.
      </p>

      <h3>Algorithmic Emission Throttle</h3>
      <p>
        When <code>setIFRLock(address)</code> is configured, the effective reward rate scales down
        automatically as more IFR is locked globally:
      </p>
      <ul>
        <li>Lock ratio &lt; 1% &rarr; full <code>rewardBps</code></li>
        <li>Lock ratio &ge; 50% &rarr; <code>MIN_REWARD_BPS</code> (500 = 5%)</li>
        <li>Between 1%&ndash;50% &rarr; linear interpolation</li>
      </ul>
      <p>
        This prevents pool exhaustion in high-adoption scenarios while maintaining attractive rewards during early growth.
      </p>

      <h3>Anti-Double-Count</h3>
      <p>
        Each <code>(wallet, partnerId)</code> pair can only be rewarded once, enforced by the
        <code>walletRewardClaimed</code> mapping. This prevents gaming via repeated lock/unlock cycles.
      </p>

      <!-- ========== 14. Governance Dashboard ========== -->
      <h2>14. Governance Dashboard</h2>
      <p>
        A read-only React dashboard for on-chain governance monitoring is available at
        <code>apps/governance-dashboard/</code>. Run locally:
      </p>
      <pre><code>cd apps/governance-dashboard && npm run dev</code></pre>
      <p>
        Tabs: <strong>Overview</strong> (PartnerVault stats, algo throttle curve) &bull;
        <strong>Partners</strong> (event-based table) &bull;
        <strong>Timelock Queue</strong> (proposals with countdown) &bull;
        <strong>Calldata Generator</strong> (encode governance calls).
      </p>

      <div class="callout callout-green">
        <p>
          <strong>Governance Constitution:</strong> Hard bounds, roles, upgrade path, and transparency rules
          are documented in <a href="https://github.com/NeaBouli/inferno/blob/main/docs/GOVERNANCE_CONSTITUTION.md">GOVERNANCE_CONSTITUTION.md</a>.
        </p>
      </div>

      <!-- ========== 12. Phase 4 — Full DAO Roadmap ========== -->
      <h2 id="dao-roadmap">12. Phase 4 &mdash; Full DAO Roadmap</h2>

      <h3>Voraussetzungen f&uuml;r Phase 4</h3>
      <ul>
        <li>Mindestens 6 Monate Mainnet-Betrieb</li>
        <li>Mindestens 1,000 aktive IFR-Locker</li>
        <li>Security Audit abgeschlossen</li>
        <li>Governance Constitution ratifiziert</li>
      </ul>

      <h3>Token-Voting Mechanismus</h3>
      <p>
        Im Full-DAO-Modus stimmen IFR-Locker &uuml;ber Proposals ab.
        Voting Power = gesperrte IFR-Menge (nicht Wallet-Balance).
      </p>

      <table>
        <thead><tr><th>Parameter</th><th>Wert</th></tr></thead>
        <tbody>
          <tr><td>Quorum</td><td>10% des total locked IFR</td></tr>
          <tr><td>Voting Period</td><td>7 Tage</td></tr>
          <tr><td>Timelock</td><td>48h (unver&auml;ndert)</td></tr>
          <tr><td>Proposal Threshold</td><td>10,000 IFR locked</td></tr>
        </tbody>
      </table>

      <h3>Roadmap</h3>
      <table>
        <thead><tr><th>Meilenstein</th><th>ETA</th><th>Status</th></tr></thead>
        <tbody>
          <tr><td>Phase 0: Single EOA</td><td>Jan 2026</td><td><span style="color:var(--green);font-weight:600;">Aktiv</span></td></tr>
          <tr><td>Phase 1: 2-of-3 Multisig</td><td>Q3 2026</td><td>Geplant</td></tr>
          <tr><td>Phase 2: 3-of-5 Multisig</td><td>Q4 2026</td><td>Geplant</td></tr>
          <tr><td>Phase 3: 4-of-7 Multisig</td><td>Q1 2027</td><td>Geplant</td></tr>
          <tr><td>Phase 4: Full DAO</td><td>Q2 2027+</td><td>Geplant</td></tr>
        </tbody>
      </table>

      <!-- Footer -->
      <footer class="wiki-footer">
        Inferno ($IFR) &mdash; Community Fair Launch Model &mdash; Documentation v1.0
      </footer>

    </main>
  </div>

  <!-- Mobile sidebar toggle script -->
  <script>
    (function () {
      var hamburger = document.getElementById('hamburger');
      var sidebar = document.getElementById('sidebar');
      var overlay = document.getElementById('sidebarOverlay');

      function toggleSidebar() {
        var isOpen = sidebar.classList.toggle('open');
        hamburger.classList.toggle('open', isOpen);
        overlay.classList.toggle('open', isOpen);
        document.body.style.overflow = isOpen ? 'hidden' : '';
      }

      hamburger.addEventListener('click', toggleSidebar);
      overlay.addEventListener('click', toggleSidebar);
    })();
  </script>

<!-- IFR AI Copilot Widget -->
<script>
(function() {
  if (window.location.hostname === 'localhost') return;
  var iframe = document.createElement('iframe');
  iframe.src = 'https://ifr-copilot.vercel.app';
  iframe.id = 'ifr-copilot-widget';
  iframe.style.cssText = 'position:fixed;bottom:24px;right:24px;width:420px;height:640px;border:none;z-index:9999;border-radius:16px;box-shadow:0 8px 32px rgba(0,0,0,0.5);display:none;';
  document.body.appendChild(iframe);
  var btn = document.createElement('button');
  btn.innerHTML = '\uD83D\uDD25 AI Copilot';
  btn.id = 'ifr-copilot-btn';
  btn.style.cssText = 'position:fixed;bottom:24px;right:24px;background:#C0392B;color:#fff;border:none;padding:12px 20px;border-radius:50px;font-size:14px;font-weight:bold;cursor:pointer;z-index:10000;box-shadow:0 4px 16px rgba(192,57,43,0.4);transition:transform 0.2s;';
  btn.onmouseover = function() { btn.style.transform = 'scale(1.05)'; };
  btn.onmouseout = function() { btn.style.transform = 'scale(1)'; };
  btn.onclick = function() {
    var open = iframe.style.display === 'block';
    iframe.style.display = open ? 'none' : 'block';
    btn.innerHTML = open ? '\uD83D\uDD25 AI Copilot' : '\u2715 Close';
    btn.style.bottom = open ? '24px' : '680px';
  };
  document.body.appendChild(btn);
})();
</script>

</body>
</html>
